<div class="dashboard-container">
  <div class="tasks-container">
    <div class="tasks-header">
      <h1>{{ 'tasks' | translate }}</h1>
      <div class="task-stats">
        <span class="todo"
          >{{ 'todo' | translate }}: {{ taskCounts.todo }}</span
        >
        <span class="inProgress"
          >{{ 'in_progress' | translate }}: {{ taskCounts.inProgress }}</span
        >
        <span class="done"
          >{{ 'done' | translate }}: {{ taskCounts.done }}</span
        >
      </div>
    </div>

    <div class="tasks-columns" fxLayout="row" fxLayoutGap="16px">
      <div
        class="task-column"
        cdkDropList
        (cdkDropListDropped)="onDrop($event, 'todo')"
        [cdkDropListData]="todoTasks"
      >
        <h2>{{ 'todo' | translate }}</h2>
        <div
          *ngFor="let task of todoTasks"
          class="task-card"
          cdkDrag
          [cdkDragData]="task"
        >
          <mat-card class="task-card">
            <mat-card-header>
              <mat-card-title>{{ task.name }}</mat-card-title>
              <button mat-icon-button (click)="deleteTask(task)">
                <mat-icon>delete</mat-icon>
              </button>
            </mat-card-header>
            <mat-card-content (click)="openEditTaskDialog(task)">
              <p>{{ task.description }}</p>
              <span [ngClass]="task.status">{{ task.status | titlecase }}</span>
            </mat-card-content>
          </mat-card>
        </div>
      </div>

      <div
        class="task-column"
        cdkDropList
        (cdkDropListDropped)="onDrop($event, 'inProgress')"
        [cdkDropListData]="inProgressTasks"
      >
        <h2>{{ 'in_progress' | translate }}</h2>
        <div
          *ngFor="let task of inProgressTasks"
          class="task-card"
          cdkDrag
          [cdkDragData]="task"
        >
          <mat-card class="task-card">
            <mat-card-header>
              <mat-card-title>{{ task.name }}</mat-card-title>
              <button mat-icon-button (click)="deleteTask(task)">
                <mat-icon>delete</mat-icon>
              </button>
            </mat-card-header>
            <mat-card-content (click)="openEditTaskDialog(task)">
              <p>{{ task.description }}</p>
              <span [ngClass]="task.status">{{ task.status | titlecase }}</span>
            </mat-card-content>
          </mat-card>
        </div>
      </div>

      <div
        class="task-column"
        cdkDropList
        (cdkDropListDropped)="onDrop($event, 'done')"
        [cdkDropListData]="doneTasks"
      >
        <h2>{{ 'done' | translate }}</h2>
        <div
          *ngFor="let task of doneTasks"
          class="task-card"
          cdkDrag
          [cdkDragData]="task"
        >
          <mat-card class="task-card">
            <mat-card-header>
              <mat-card-title>{{ task.name }}</mat-card-title>
              <button mat-icon-button (click)="deleteTask(task)">
                <mat-icon>delete</mat-icon>
              </button>
            </mat-card-header>
            <mat-card-content (click)="openEditTaskDialog(task)">
              <p>{{ task.description }}</p>
              <span [ngClass]="task.status">{{ task.status | titlecase }}</span>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </div>
  </div>
</div>
